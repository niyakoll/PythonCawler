#pip install queuelib
import queue
#pip install thread
import threading
#pip install requests
import requests

ip_list = queue.Queue()
valid_proxy = ['38.60.91.60:80', '139.99.237.62:80', '213.142.156.97:80', '193.31.117.184:80', '38.54.71.67:80', '154.65.39.8:80', '41.191.203.160:80', '123.30.154.171:7777', '192.73.244.36:80', '158.255.77.168:80', '188.40.57.101:80', '4.156.78.45:80', '41.191.203.167:80', '23.247.136.254:80', '158.255.77.166:80', '45.143.99.15:80', '194.145.200.184:3128', '152.53.107.230:80', '81.169.213.169:8888', '176.65.132.67:3128', '181.174.164.221:80', '4.245.123.244:80', '124.108.6.20:8085', '4.195.16.140:80', '108.141.130.146:80', '143.42.66.91:80', '47.74.157.194:80', '90.162.35.34:80', '178.124.197.141:8080', '185.88.177.197:8080', '41.191.203.162:80', '147.75.34.105:443', '41.191.203.161:80', '89.58.55.33:80', '80.74.54.148:3128', '41.59.90.171:80', '197.221.234.253:80', '91.103.120.49:443', '89.58.57.45:80', '27.74.215.131:30245', '160.251.142.232:80', '195.114.209.50:80', '5.252.33.13:2025', '47.56.110.204:8989', '158.255.77.169:80', '14.251.13.0:8080', '97.74.87.226:80', '62.171.159.232:8888', '176.126.103.194:44214', '8.219.97.248:80', '129.226.207.13:20201', '196.1.93.10:80', '133.18.234.13:80', '147.75.33.108:10000', '206.42.55.99:3128', '91.121.63.51:1080', '20.252.53.196:3128', '122.53.64.156:8081', '103.87.185.39:8080', '187.94.220.85:8080', '163.223.230.92:39089', '42.98.208.100:8080', '68.183.143.134:80', '154.236.177.100:1977', '92.113.150.5:1080', '54.226.156.148:20201', '84.53.245.42:41258', '41.32.39.7:3128', '47.90.205.231:33333', '154.0.14.116:3128', '219.93.101.62:80', '5.45.126.128:8080', '41.223.119.156:3128', '121.176.173.123:80', '20.210.39.153:8561', '203.217.101.190:80', '20.27.11.248:8561', '181.78.107.139:999', '202.58.77.77:1111', '8.220.136.174:1080', '8.213.195.191:1081', '37.27.6.46:80', '213.35.105.30:8080', '133.232.81.141:80', '200.201.134.184:8787', '36.92.193.189:80', '47.89.159.212:1081', '8.213.129.20:3128', '157.66.16.52:8080', '91.218.244.153:8989', '159.203.61.169:3128', '161.35.70.249:8080', '128.199.202.122:8080', '41.59.90.175:80', '38.54.9.151:1234', '134.209.29.120:80', '84.39.112.144:3128', '195.158.8.123:3128', '188.235.146.220:40754', '47.251.43.115:33333', '103.167.4.10:8080', '202.47.188.193:7777', '201.46.24.174:3128', '95.214.123.99:8080', '192.206.202.1:8080', '', '45.15.10.174:3128']
valid_thread_proxies = []
with open('proxy_list.txt','r') as f:
    proxy_list = f.read().split('\n')
    for ip in proxy_list:
        ip_list.put(ip)


def check_proxy():
    global ip_list
    while not ip_list.empty():
        proxy = ip_list.get()
        try:
            res = requests.get('http://ipinfo.io/json',proxies={
                "http":proxy,
                "https":proxy
            })
        except:
            continue
        if res.status_code == 200:
            print(proxy)
            valid_proxy.append(proxy)
    print(valid_proxy)

def check_thread_proxy():
    global valid_proxy
    for valid_ip in valid_proxy:
        try:
            res = requests.get('https://www.threads.com/search?q=MC%20CHEUNG&serp_type=default&hl=en',proxies={
                "http":valid_ip,
                "https":valid_ip
            })
        except:
            continue
        if res.status_code == 200:
            print(valid_ip)
            valid_thread_proxies.append(valid_ip)
    print(valid_thread_proxies)

#for _ in range(10):
    #threading.Thread(target=check_thread_proxy).start()
    #threading.Thread(target=check_proxy).join()
    

#print("First Check Finish!")


#for _ in range(10):
    #threading.Thread(target=check_thread_proxy).start()
#print("Threads Check Finish!")

#print(set(valid_thread_proxies))

"""
176.65.132.67:3128
176.65.132.67:3128
176.65.132.67:3128
147.75.34.105:443
147.75.34.105:443
147.75.34.105:443
91.103.120.49:443
147.75.34.105:443
27.74.215.131:30245
91.103.120.49:443
147.75.34.105:443
5.252.33.13:2025
27.74.215.131:30245
91.103.120.49:443
27.74.215.131:30245
14.251.13.0:8080
91.103.120.49:443
14.251.13.0:8080
14.251.13.0:8080
27.74.215.131:30245
91.103.120.49:443
27.74.215.131:30245
5.252.33.13:2025
147.75.34.105:443
62.171.159.232:8888
5.252.33.13:2025
176.126.103.194:44214
14.251.13.0:8080
91.103.120.49:443
62.171.159.232:8888
27.74.215.131:30245
62.171.159.232:8888
176.126.103.194:44214
14.251.13.0:8080
147.75.34.105:443
176.126.103.194:44214
5.252.33.13:2025
129.226.207.13:20201
62.171.159.232:8888
147.75.34.105:443
129.226.207.13:20201
176.126.103.194:44214
91.103.120.49:443
27.74.215.131:30245
129.226.207.13:20201
91.103.120.49:443
27.74.215.131:30245
147.75.34.105:443
14.251.13.0:8080
14.251.13.0:8080
8.219.97.248:80
91.103.120.49:443
62.171.159.232:8888
62.171.159.232:8888
176.126.103.194:44214
27.74.215.131:30245
176.126.103.194:44214
129.226.207.13:20201
5.252.33.13:2025
91.103.120.49:443
129.226.207.13:20201
27.74.215.131:30245
8.219.97.248:80
176.126.103.194:44214
62.171.159.232:8888
5.252.33.13:2025
8.219.97.248:80
176.126.103.194:44214
206.42.55.99:3128
8.219.97.248:80
206.42.55.99:3128
129.226.207.13:20201
129.226.207.13:20201
129.226.207.13:20201
91.121.63.51:1080
62.171.159.232:8888
176.126.103.194:44214
8.219.97.248:80
147.75.33.108:10000
129.226.207.13:20201
206.42.55.99:3128
91.121.63.51:1080
20.252.53.196:3128
20.252.53.196:3128
206.42.55.99:3128
20.252.53.196:3128
91.121.63.51:1080
206.42.55.99:3128
91.121.63.51:1080
20.252.53.196:3128
91.121.63.51:1080
20.252.53.196:3128
20.252.53.196:3128
103.87.185.39:8080
20.252.53.196:3128
103.87.185.39:8080
163.223.230.92:39089
103.87.185.39:8080
91.121.63.51:1080
103.87.185.39:8080
206.42.55.99:3128
163.223.230.92:39089
163.223.230.92:39089
163.223.230.92:39089
20.252.53.196:3128
42.98.208.100:8080
103.87.185.39:8080
20.252.53.196:3128
91.121.63.51:1080
163.223.230.92:39089
103.87.185.39:8080
20.252.53.196:3128
103.87.185.39:8080
154.0.14.116:3128
92.113.150.5:1080
41.223.119.156:3128
47.90.205.231:33333
20.210.39.153:8561
41.223.119.156:3128
41.223.119.156:3128
47.90.205.231:33333
154.0.14.116:3128
154.0.14.116:3128
41.223.119.156:3128
41.223.119.156:3128
20.210.39.153:8561
41.223.119.156:3128
154.0.14.116:3128
41.223.119.156:3128
20.27.11.248:8561
20.210.39.153:8561
20.27.11.248:8561
213.35.105.30:8080
20.210.39.153:8561
213.35.105.30:8080
213.35.105.30:8080
20.27.11.248:8561
154.0.14.116:3128
41.223.119.156:3128
154.0.14.116:3128
47.90.205.231:33333
41.223.119.156:3128
20.27.11.248:8561
202.58.77.77:1111
20.210.39.153:8561
154.0.14.116:3128
41.223.119.156:3128
213.35.105.30:8080
20.210.39.153:8561
213.35.105.30:8080
20.27.11.248:8561
20.210.39.153:8561
213.35.105.30:8080
20.27.11.248:8561
213.35.105.30:8080
213.35.105.30:8080
213.35.105.30:8080
213.35.105.30:8080
"""
