<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Admin - Client Settings</title>
<style>
/* Basic layout + look inspired by screenshot */
:root{
  --bg:#f6f6f7;
  --card:#fff;
  --muted:#9aa1a7;
  --accent:#0b69ff;
  --sidebar:#fbfdff;
  --radius:12px;
  --shadow: 0 6px 18px rgba(20,30,40,.06);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:#14181c}
.app{display:flex;min-height:100vh}
.sidebar{
  width:220px;background:var(--sidebar);padding:28px 18px;border-right:1px solid rgba(15,20,25,.04);
  display:flex;flex-direction:column;gap:18px;align-items:flex-start;
}
.logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:18px}
.logo .mark{width:36px;height:36px;background:#0b69ff;border-radius:6px}
.nav{width:100%;margin-top:6px}
.nav a{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;color:#5e676f;text-decoration:none;margin-bottom:6px}
.nav a.active{background:#f1f5ff;color:#0b69ff;font-weight:600}
.nav a .icon{width:22px;height:22px;border-radius:4px;background:rgba(11,105,255,.08);display:inline-flex;align-items:center;justify-content:center;color:var(--accent);font-size:12px}

/* main */
.container{flex:1;padding:36px}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.header h1{margin:0;font-size:26px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px;max-width:920px}

/* form */
.form-row{display:flex;gap:16px;margin-bottom:14px}
.col{flex:1;min-width:0}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
.input,textarea,select{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e6e9ee;background:#fff;font-size:14px;color:#111;outline:none}
textarea{min-height:110px;resize:vertical}
.small{font-size:13px;color:var(--muted);margin-top:6px}

/* keywords chips */
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.chip{background:#f3f7ff;color:var(--accent);padding:6px 10px;border-radius:999px;font-size:13px;border:1px solid rgba(11,105,255,.08)}

/* submit */
.actions{display:flex;justify-content:flex-end;margin-top:18px;gap:12px}
.btn{padding:10px 16px;border-radius:10px;border:0;font-weight:600;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(15,20,25,.06)}
.btn.primary{background:var(--accent);color:white;box-shadow:0 8px 24px rgba(11,105,255,.12)}

/* responsive */
@media (max-width:820px){
  .app{flex-direction:column}
  .sidebar{width:100%;flex-direction:row;gap:8px;overflow:auto}
  .container{padding:18px}
  .form-row{flex-direction:column}
}
</style>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="logo"><div class="mark"></div><div>Chessman Admin</div></div>
    <nav class="nav" aria-label="Main navigation">
      <a href="#" class="active"><span class="icon">‚ûï</span> Add Client</a>
      <a href="#"><span class="icon">üìã</span> view Client</a>
      <a href="#"><span class="icon">‚öôÔ∏è</span> Change client setting</a>
    </nav>
  </aside>

  <main class="container">
    <div class="header">
      <h1>Admin ‚Äî Client Settings</h1>
    </div>

    <section class="card" aria-labelledby="settings-title">
      <h2 id="settings-title" style="margin:0 0 14px 0">Configure Client</h2>

      <form id="settingsForm" autocomplete="off" novalidate method="post" action="/changeSetting.py">
        <div class="form-row">
          <div class="col">
            <label for="clientName">Client Name</label>
            <input id="clientName" name="clientName" class="input" type="text" placeholder="e.g. Ë¶™ÊÑõÁöÑBOB" required />
            <div class="small">Give the client an identifiable name.</div>
          </div>

          <div class="col">
            <label for="whatsappGroup">Target WhatsApp Group</label>
            <input id="whatsappGroup" name="whatsappGroup" class="input" type="text" placeholder="Group name or link" />
            <div class="small">Optional ‚Äî who should receive messages.</div>
          </div>
        </div>

        <div style="margin-top:8px">
          <label for="keywords">Keyword list</label>
          <textarea id="keywords" name="keywords" placeholder="Enter keywords separated by commas, newlines or semicolons"></textarea>
          <div class="small">Keywords will be parsed into tags below. Press Submit when ready.</div>

          <div id="chips" class="chips" aria-live="polite" style="margin-bottom:2px"></div>
        </div>

        <div class="actions">
          <button type="button" id="resetBtn" class="btn ghost">Reset</button>
          <button type="submit" class="btn primary">Submit</button>
        </div>
      </form>

      <div id="result" style="margin-top:14px;font-size:14px;color:#0b69ff"></div>
    </section>
  </main>
</div>

<script>
/* parse keywords, show chips, and handle submit */
const keywordsEl = document.getElementById('keywords');
const chipsEl = document.getElementById('chips');
const form = document.getElementById('settingsForm');
const result = document.getElementById('result');
const resetBtn = document.getElementById('resetBtn');

function parseKeywords(text){
  if(!text) return [];
  return text
    .split(/[\n,;]+/)
    .map(s=>s.trim())
    .filter(Boolean)
    .slice(0,200); // limit to 200
}

function renderChips(list){
  chipsEl.innerHTML = '';
  list.forEach(k=>{
    const div = document.createElement('div');
    div.className = 'chip';
    div.textContent = k;
    chipsEl.appendChild(div);
  });
}

keywordsEl.addEventListener('input', e=>{
  renderChips(parseKeywords(e.target.value));
});

// handle form submit
form.addEventListener('submit', e=>{
  e.preventDefault();
  const clientName = document.getElementById('clientName').value.trim();
  const whatsappGroup = document.getElementById('whatsappGroup').value.trim();
  const keywords = parseKeywords(keywordsEl.value);

  if(!clientName){
    result.style.color = '#c0392b';
    result.textContent = 'Client name is required.';
    return;
  }

  const payload = {
    client: clientName,
    whatsappGroup: whatsappGroup || null,
    keywords
  };

  // For demo: save to localStorage and show success. Replace with fetch() to send to server.
  localStorage.setItem('clientSettings', JSON.stringify(payload, null, 2));
  result.style.color = '#0b69ff';
  result.textContent = 'Saved settings ‚Äî preview in console and localStorage.';
  console.log('Saved client settings:', payload);
});

// reset
resetBtn.addEventListener('click', ()=>{
  form.reset();
  renderChips([]);
  result.textContent = '';
});
</script>
</body>
</html>